<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tasty Pizza & Burger ‚Äî Black Friday Menu</title>

<!-- Social preview -->
<meta property="og:title" content="Tasty Pizza & Burger ‚Äî Black Friday Menu">
<meta property="og:description" content="Hot deals, fresh pizzas & smashing burgers. Order on WhatsApp in one tap.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://example.com/">
<meta property="og:image" content="https://example.com/og-tasty.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0b0d; --card:#141417; --soft:#1b1b20;
  --ink:#f5f5f6; --muted:#b0b0b6;
  --primary:#e11d48; --accent:#f5c542;
  --ctaText:#061a0b; --ring:0 0 0 3px rgba(245,197,66,.28);
  --radius:18px; --border:#232327;
}
html[data-theme="hunger"]{ --primary:#e5262a; --accent:#ffd21f; --ring:0 0 0 3px rgba(255,210,31,.28); --border:#2a2a2f; }
html[data-theme="classic"]{ --primary:#e11d48; --accent:#f5c542; --border:#232327; }
html[data-theme="fresh"]{ --primary:#16a34a; --accent:#9be15d; --ring:0 0 0 3px rgba(22,163,74,.28); --border:#1f2937; }

/* ===== McD LIGHT (fundo branco) ===== */
html[data-theme="mcd"]{
  --bg:#ffffff; --card:#ffffff; --soft:#f7f7f8;
  --ink:#111114; --muted:#5f6368;
  --primary:#ffbc0d; /* amarelo McD */
  --accent:#db0007;  /* vermelho McD */
  --ring:0 0 0 3px rgba(255,188,13,.35);
  --radius:18px; --border:#e5e7eb;
}

*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{background:var(--bg);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
a{color:var(--accent);text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:18px}

/* Topbar */
header{
  position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(6px);
  background:linear-gradient(180deg, color-mix(in hsl, var(--card) 96%, transparent), color-mix(in hsl, var(--card) 88%, transparent));
  border-bottom:1px solid var(--border)
}
.bar{display:flex;align-items:center;gap:14px;justify-content:space-between;flex-wrap:wrap}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:40px;height:40px;border-radius:50%;background:#fff url('./img/logo.png') center/cover no-repeat;border:2px solid var(--primary)}
.title{font-weight:800;letter-spacing:.3px}
.sub{color:var(--muted);font-size:12px}

.row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:linear-gradient(180deg,var(--soft),color-mix(in hsl, var(--card) 92%, transparent));cursor:pointer;font-weight:700;color:var(--ink)}
.pill:hover{box-shadow:var(--ring)}
.pill i{font-style:normal;opacity:.9}

/* Social */
.social{display:flex;gap:6px}
.icon{width:28px;height:28px;border-radius:999px;display:grid;place-items:center;border:1px solid var(--border);background:color-mix(in hsl, var(--card) 92%, transparent);font-size:14px;cursor:pointer}
.icon:hover{box-shadow:var(--ring)}

/* Idioma & Tema */
.lang,.themes{display:flex;gap:8px;align-items:center}
.flag{cursor:pointer;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:linear-gradient(180deg,var(--soft),color-mix(in hsl, var(--card) 92%, transparent));display:flex;align-items:center;gap:6px}
.flag img{width:16px;height:16px;border-radius:50%}
.flag.active{outline:3px solid rgba(0,0,0,.06);border-color:var(--accent)}
.theme{width:28px;height:28px;border-radius:999px;padding:0;border:1px solid var(--border)}
.theme[data-theme="hunger"]{background:radial-gradient(circle at 30% 30%, var(--accent), transparent 55%), var(--primary)}
.theme[data-theme="classic"]{background:#333}
.theme[data-theme="fresh"]{background:linear-gradient(135deg,#16a34a,#9be15d)}
.theme[data-theme="mcd"]{background:linear-gradient(135deg,#ffbc0d,#ffd861)}

/* Hero */
.hero{margin:22px 0;border-radius:var(--radius);padding:22px;
  background:
    radial-gradient(1100px 280px at 8% -40%, color-mix(in hsl, var(--primary) 30%, transparent), transparent 60%),
    radial-gradient(900px 240px at 92% -18%, color-mix(in hsl, var(--accent) 25%, transparent), transparent 60%),
    linear-gradient(135deg, color-mix(in hsl, var(--card) 92%, transparent), color-mix(in hsl, var(--soft) 96%, transparent));
  border:1px solid var(--border);
}
.badge{display:inline-block;margin:6px 0 12px;padding:6px 12px;border-radius:999px;background:linear-gradient(90deg,var(--primary),var(--accent));color:#fff;font-weight:800;letter-spacing:.4px;border:0}
.hero h1{margin:0 0 8px;font-size:clamp(26px,3.8vw,38px)}
.hero .muted{color:var(--muted)}
.ctas{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
.btn{border:1px solid var(--border);border-radius:12px;padding:10px 12px;font-weight:800;cursor:pointer}
.btn.primary{background:var(--primary);color:#111;border-color:var(--primary)}
.btn.secondary{background:linear-gradient(90deg,color-mix(in hsl, var(--card) 96%, transparent),var(--soft));color:var(--ink)}

/* Tabs & grid */
.tabs{display:flex;gap:10px;flex-wrap:wrap;margin:14px 0 18px}
.tabs .pill.active{box-shadow:var(--ring);border-color:var(--accent)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:20px;overflow:hidden;display:flex;flex-direction:column;position:relative;box-shadow:0 2px 10px rgba(0,0,0,.04)}
.card .img{aspect-ratio:1/1;background:#0e0e11 url('./img/pizza.jpg') center/cover no-repeat;content-visibility:auto;contain-intrinsic-size:300px 300px}
html[data-theme="mcd"] .card .img{background:#f5f5f5 url('./img/pizza.jpg') center/cover no-repeat}
.card .body{padding:14px 14px 10px}
.name{font-weight:800}
.desc{color:var(--muted);font-size:13px;margin:6px 0 10px;min-height:36px}
.row-sb{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}
select,.qty{border:1px solid var(--border);background:color-mix(in hsl, var(--card) 92%, transparent);color:var(--ink);border-radius:12px}
select{padding:8px 10px}
.qty{display:flex;align-items:center;gap:10px;padding:6px 10px}
.qty button{border:none;background:none;color:var(--ink);font-size:18px;cursor:pointer}
.price{font-weight:800;color:var(--accent)}
.tag{position:absolute;left:10px;top:10px;background:var(--accent);color:#fff;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:800}
.btn.add{background:var(--primary);border-color:var(--primary);color:#111}
.btn.add:hover{filter:brightness(1.06)}

/* Cart drawer */
.fab{position:fixed;right:18px;bottom:18px;background:#22c55e;color:#062b14;border:none;border-radius:999px;padding:14px 18px;font-weight:900;cursor:pointer;box-shadow:0 10px 25px rgba(34,197,94,.35);z-index:60}
.drawer{position:fixed;inset:0;pointer-events:none;z-index:55}
.drawer.active{pointer-events:auto}
.overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);opacity:0;transition:.2s}
.drawer.active .overlay{opacity:1}
.panel{position:absolute;right:-420px;top:0;height:100svh;width:min(92vw,380px);
  background:var(--card);border-left:1px solid var(--border);transition:.25s;padding:18px;display:flex;flex-direction:column;gap:12px;overflow:auto;-webkit-overflow-scrolling:touch}
.drawer.active .panel{right:0}
.cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;border-bottom:1px dashed var(--border);padding:8px 0}
.cart-item img{width:64px;height:64px;border-radius:12px;object-fit:cover;background:#0e0e11}
.meta{font-size:12.5px;color:var(--muted)}
.totals{margin-top:auto;border-top:1px solid var(--border);padding-top:10px}
.cta{display:flex;flex-direction:column;gap:10px}
.btn.mail{background:#000;color:#fff;border:1px solid #333}
.btn.wa{background:#25d366;color:#073b16;border:1px solid #0c4}

/* Modal cadastro */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);padding:16px;z-index:70}
.modal.show{display:flex}
.card-modal{background:var(--card);border-radius:20px;max-width:560px;width:100%;padding:18px;border:1px solid var(--border);color:var(--ink)}
.card-modal h3{margin:0 0 8px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid2 .full{grid-column:1/-1}
input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:color-mix(in hsl, var(--card) 94%, transparent);color:var(--ink)}
input:focus,textarea:focus,select:focus{outline:none;box-shadow:var(--ring);border-color:var(--accent)}
.ok{display:none;margin:8px 0 0;padding:10px;border-radius:12px;background:color-mix(in hsl, var(--card) 96%, transparent);border:1px solid var(--border);color:#0a7a0a;font-weight:700}
.ok.show{display:block}

/* Toast */
.toast{position:fixed;left:50%;bottom:90px;transform:translateX(-50%);background:color-mix(in hsl, var(--card) 96%, transparent);border:1px solid var(--border);border-radius:12px;padding:10px 14px;z-index:80;opacity:0;transition:.2s}
.toast.show{opacity:1}

/* Footer */
footer{margin:40px 0 80px;color:var(--muted);text-align:center}

/* RTL */
html[dir="rtl"] .row-sb{flex-direction:row-reverse}
html[dir="rtl"] .tag{left:auto;right:10px}
html[dir="rtl"] .cart-item{grid-template-columns:auto 1fr 64px}
</style>

<!-- Structured data (SEO) -->
<script type="application/ld+json">
{
 "@context":"https://schema.org",
 "@type":"Restaurant",
 "name":"Tasty Pizza & Burger",
 "telephone":"+44 20 8366 6220",
 "address":{"@type":"PostalAddress","streetAddress":"123 Turnpike Lane","postalCode":"N8 0DU","addressCountry":"GB"},
 "servesCuisine":["Pizza","Burgers"],
 "priceRange":"¬£",
 "hasMenu":"https://example.com/menu",
 "sameAs":["https://www.instagram.com/yourprofile","https://www.tiktok.com/@yourprofile"]
}
</script>
</head>
<body>

<header>
  <div class="container bar">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <div class="title" data-i18n="brand">Tasty Pizza & Burger</div>
        <div class="sub" data-i18n="slogan">Hot. Fresh. Fast.</div>
      </div>
    </div>

    <div class="row">
      <!-- Contatos -->
      <a class="pill" href="tel:+442083866220"><i>üìû</i> 020 8366 6220</a>
      <a class="pill" id="topWhats" target="_blank" rel="noopener"><i>üü¢</i> WhatsApp</a>
      <a class="pill" href="https://maps.google.com/?q=123+Turnpike+Lane,+N8+0DU" target="_blank" rel="noopener">
        <i>üìç</i> 123 Turnpike Lane, N8 0DU
      </a>

      <!-- Social -->
      <div class="social" aria-label="Social">
        <a class="icon" href="#" title="X">ùïè</a>
        <a class="icon" href="#" title="YouTube">‚ñ∂</a>
        <a class="icon" href="#" title="Instagram">‚óé</a>
        <a class="icon" href="#" title="TikTok">‚ô¨</a>
        <a class="icon" href="#" title="Snapchat">üëª</a>
      </div>

      <!-- Idioma -->
      <div class="lang" aria-label="Language">
        <button class="flag active" id="btn-en" data-lang="en" title="English" type="button">
          <img alt="EN" src="https://flagcdn.com/gb.svg"> EN
        </button>
        <button class="flag" id="btn-ar" data-lang="ar" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©" type="button">
          <img alt="AR" src="https://flagcdn.com/sa.svg"> AR
        </button>
      </div>

      <!-- Tema -->
      <div class="themes" aria-label="Theme">
        <button class="theme" data-theme-btn data-theme="hunger" title="Hungry" type="button"></button>
        <button class="theme" data-theme-btn data-theme="classic" title="Classic (Dark)" type="button"></button>
        <button class="theme" data-theme-btn data-theme="fresh" title="Fresh (Green)" type="button"></button>
        <button class="theme" data-theme-btn data-theme="mcd" title="McD Light (White)" type="button"></button>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <!-- Banner -->
  <section class="hero" aria-labelledby="bfTitle1">
    <span class="badge" data-i18n="bf_badge_big">BLACK FRIDAY ‚Ä¢ LIMITED TIME</span>
    <h1 id="bfTitle1"><span style="font-size:clamp(34px,6vw,56px);font-weight:800">0%</span> <span style="font-size:clamp(26px,4.5vw,40px);font-weight:800" data-i18n="off_pizzas">OFF PIZZAS</span></h1>
    <p class="muted" data-i18n="bf_line2">Limited time only ‚Ä¢ Dine-in, collection or delivery</p>
    <div class="ctas">
      <a class="btn secondary" href="#catalog" data-i18n="see_menu">See Menu</a>
      <button class="btn primary" id="ctaWhatsTop" data-i18n="order_whats" type="button">Order on WhatsApp</button>
    </div>
  </section>

  <!-- Banner menor -->
  <section class="hero" aria-labelledby="bfTitle2">
    <span class="badge" data-i18n="bf_badge">BLACK FRIDAY ‚Ä¢ LIMITED TIME</span>
    <h1 id="bfTitle2"><span class="gold" data-i18n="bf_title_gold">Big Deals</span> <span data-i18n="bf_title_rest">on Pizza & Burgers</span></h1>
    <p class="muted" data-i18n="bf_desc">Choose size and extras, add to cart and finish via WhatsApp. Pickup or delivery.</p>
    <p class="muted" id="eta" aria-live="polite">Delivery ~35‚Äì45 min ‚Ä¢ Pickup ~15 min</p>
  </section>

  <!-- Tabs + cat√°logo -->
  <nav class="tabs" id="tabs"></nav>
  <section id="catalog" class="grid" aria-live="polite"></section>
</main>

<!-- FAB carrinho -->
<button class="fab" id="fabCart" type="button">üõí <span data-i18n="cart">Cart</span> <span id="fabCount">0</span></button>

<!-- Drawer carrinho -->
<div class="drawer" id="drawer" aria-hidden="true">
  <div class="overlay" id="overlay"></div>
  <aside class="panel" aria-labelledby="cartTitle">
    <h2 id="cartTitle" style="margin:0" data-i18n="your_cart">Your order</h2>
    <div id="cartList"></div>
    <div class="totals">
      <div class="row-sb">
        <strong data-i18n="total">Total</strong>
        <strong id="cartTotal" aria-live="polite">¬£0.00</strong>
      </div>
      <div class="muted" style="font-size:12px">No online payment ‚Ä¢ Pay on delivery/pickup</div>
    </div>
    <div class="cta">
      <button class="btn secondary" id="btnCadastro" data-i18n="open_signup" type="button">Customer details</button>
      <button class="btn secondary" id="btnClear" data-i18n="clear" type="button">Clear cart</button>
      <button class="btn wa" id="btnWhats" disabled data-i18n="finish_wa" type="button">Finish on WhatsApp</button>
      <button class="btn mail" id="btnEmail" disabled data-i18n="finish_mail" type="button">Send by Email</button>
    </div>
  </aside>
</div>

<!-- Modal cadastro -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="custTitle" aria-describedby="custHint">
  <div class="card-modal">
    <h3 id="custTitle" data-i18n="cust_title">Customer details</h3>
    <p class="muted" id="custHint" style="margin-top:-6px" data-i18n="cust_hint">Required to deliver or arrange pickup. No online payment here.</p>
    <form id="custForm" novalidate>
      <div class="grid2">
        <label> <span data-i18n="name">Name</span>
          <input id="c_nome" placeholder="John Doe" required autocomplete="name">
        </label>
        <label> <span data-i18n="phone">Phone (WhatsApp)</span>
          <input id="c_tel" type="tel" inputmode="tel" placeholder="+44 7‚Ä¶" required autocomplete="tel">
        </label>
        <label class="full"> <span data-i18n="mode">Order type</span>
          <select id="c_mode">
            <option value="delivery" data-i18n="delivery">Delivery</option>
            <option value="pickup" data-i18n="pickup">Pickup</option>
          </select>
        </label>
        <label> <span data-i18n="address">Address</span>
          <input id="c_addr" placeholder="Street, number" autocomplete="address-line1">
        </label>
        <label> <span data-i18n="postcode">Postcode</span>
          <input id="c_cep" placeholder="N8 0DU" pattern="^([A-Z]{1,2}\\d[A-Z\\d]?)\\s?(\\d[A-Z]{2})$" title="Ex.: N8 0DU" autocomplete="postal-code">
        </label>
        <label class="full"> <span data-i18n="notes">Notes</span>
          <textarea id="c_obs" rows="3" placeholder="Door code, no onions, etc."></textarea>
        </label>
        <label class="full" style="display:flex;gap:8px;align-items:center">
          <input id="c_rem" type="checkbox"> <span>Remember my details on this device</span>
        </label>
      </div>
      <div class="row" style="justify-content:space-between;margin-top:12px">
        <button class="pill" id="fecharModal" type="button" data-i18n="back">Back</button>
        <button class="pill" id="salvarCadastro" type="submit" data-i18n="save">Save details</button>
      </div>
      <div class="ok" id="okMsg" data-i18n="saved_ok">Saved! üéâ</div>
    </form>
  </div>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<footer class="container">
  <p data-i18n="foot_note">Prices in GBP. Images illustrative. Black Friday deals while stocks last.</p>
  <p style="font-size:12px">We only store your details locally if you choose ‚ÄúRemember‚Äù. You can clear at any time.</p>
  <p>¬© <span id="y"></span> Tasty Pizza & Burger</p>
</footer>

<script>
/* ===================== CONFIG ===================== */
const STORE = {
  whatsapp: "+447931217826",
  emailPedidos: "orders@tastypizza.co.uk",
  currency: "¬£"
};
const phoneDigits = STORE.whatsapp.replace(/\D/g,'');
document.getElementById('topWhats').href = `https://wa.me/${phoneDigits}`;
document.getElementById('ctaWhatsTop').addEventListener('click', ()=>safeOpen(`https://wa.me/${phoneDigits}`));

/* ===================== I18N ===================== */
const I18N = {
  en:{brand:"Tasty Pizza & Burger", slogan:"Hot. Fresh. Fast.",
    bf_badge_big:"BLACK FRIDAY ‚Ä¢ LIMITED TIME", off_pizzas:"OFF PIZZAS",
    bf_badge:"BLACK FRIDAY ‚Ä¢ LIMITED TIME", bf_title_gold:"Big Deals", bf_title_rest:"on Pizza & Burgers",
    bf_desc:"Choose size and extras, add to cart and finish via WhatsApp. Pickup or delivery.",
    bf_line2:"Limited time only ‚Ä¢ Dine-in, collection or delivery",
    see_menu:"See Menu", order_whats:"Order on WhatsApp",
    tabs:["Pizzas","Burgers","Wraps","Sides","Deals","Drinks"],
    add:"Add", size:"Size", qty:"Qty", from:"from",
    cart:"Cart", your_cart:"Your order", total:"Total", clear:"Clear cart",
    open_signup:"Customer details", finish_wa:"Finish on WhatsApp", finish_mail:"Send by Email",
    foot_note:"Prices in GBP. Images illustrative. Black Friday deals while stocks last.",
    wa_header:"Order via Black Friday menu", wa_items:"Items",
    cust_title:"Customer details", cust_hint:"Required to deliver or arrange pickup. No online payment here.",
    name:"Name", phone:"Phone (WhatsApp)", mode:"Order type", delivery:"Delivery", pickup:"Pickup",
    address:"Address", postcode:"Postcode", notes:"Notes", back:"Back", save:"Save details", saved_ok:"Saved! üéâ"
  },
  ar:{brand:"ÿ™ŸäŸíÿ≥Ÿíÿ™Ÿä ÿ®Ÿäÿ™ÿ≤ÿß Ÿàÿ®ÿ±ÿ∫ÿ±", slogan:"ÿ≥ÿßÿÆŸÜÿ© Ÿàÿ∑ÿßÿ≤ÿ¨ÿ© Ÿàÿ≥ÿ±Ÿäÿπÿ©",
    bf_badge_big:"ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ¨ŸÖÿπÿ© ÿßŸÑÿ≥ŸàÿØÿßÿ° ‚Ä¢ ŸÑŸÅÿ™ÿ±ÿ© ŸÖÿ≠ÿØŸàÿØÿ©", off_pizzas:"ÿÆÿµŸÖ ÿπŸÑŸâ ÿßŸÑÿ®Ÿäÿ™ÿ≤ÿß",
    bf_badge:"ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ¨ŸÖÿπÿ© ÿßŸÑÿ≥ŸàÿØÿßÿ° ‚Ä¢ ŸÑŸÅÿ™ÿ±ÿ© ŸÖÿ≠ÿØŸàÿØÿ©", bf_title_gold:"ÿÆÿµŸàŸÖÿßÿ™ ŸÉÿ®Ÿäÿ±ÿ©", bf_title_rest:"ÿπŸÑŸâ ÿßŸÑÿ®Ÿäÿ™ÿ≤ÿß ŸàÿßŸÑÿ®ÿ±ÿ∫ÿ±",
    bf_desc:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ≠ÿ¨ŸÖ ŸàÿßŸÑÿ•ÿ∂ÿßŸÅÿßÿ™ÿå ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸÑÿ© Ÿàÿ£ŸÉŸÖŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®. ÿ™ŸàÿµŸäŸÑ ÿ£Ÿà ÿßÿ≥ÿ™ŸÑÿßŸÖ.",
    bf_line2:"ŸÑŸÅÿ™ÿ±ÿ© ŸÖÿ≠ÿØŸàÿØÿ© ‚Ä¢ ÿ™ŸÜÿßŸàŸÑ ÿ®ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ£Ÿà ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ£Ÿà ÿ™ŸàÿµŸäŸÑ",
    see_menu:"ÿßÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©", order_whats:"ÿßÿ∑ŸÑÿ® ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®",
    tabs:["ÿ®Ÿäÿ™ÿ≤ÿß","ÿ®ÿ±ÿ∫ÿ±","ÿ±ÿßÿ®ÿ≥","ŸÖŸÇÿ®ŸÑÿßÿ™","ÿπÿ±Ÿàÿ∂","ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™"],
    add:"ÿ£ÿ∂ŸêŸÅ", size:"ÿßŸÑÿ≠ÿ¨ŸÖ", qty:"ÿßŸÑŸÉŸÖŸäÿ©", from:"ÿßÿ®ÿ™ÿØÿßÿ°Ÿã ŸÖŸÜ",
    cart:"ÿßŸÑÿ≥ŸÑÿ©", your_cart:"ÿ∑ŸÑÿ®ŸÉ", total:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä", clear:"ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ≥ŸÑÿ©",
    open_signup:"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÖŸäŸÑ", finish_wa:"ÿ£ŸÉŸÖŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®", finish_mail:"ÿ£ÿ±ÿ≥ŸÑ ÿ®ÿßŸÑÿ®ÿ±ŸäÿØ",
    foot_note:"ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿ®ÿßŸÑÿ¨ŸÜŸäŸá ÿßŸÑÿ•ÿ≥ÿ™ÿ±ŸÑŸäŸÜŸä. ÿßŸÑÿµŸàÿ± ŸÑŸÑÿ™Ÿàÿ∂Ÿäÿ≠. ÿßŸÑÿπÿ±Ÿàÿ∂ ÿ≠ÿ™Ÿâ ŸÜŸÅÿßÿØ ÿßŸÑŸÉŸÖŸäÿ©.",
    wa_header:"ÿ∑ŸÑÿ® ÿπÿ®ÿ± ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ¨ŸÖÿπÿ© ÿßŸÑÿ≥ŸàÿØÿßÿ°", wa_items:"ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™",
    cust_title:"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÖŸäŸÑ", cust_hint:"ŸÖÿ∑ŸÑŸàÿ®ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ ÿ£Ÿà ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ. ŸÑÿß ŸäŸàÿ¨ÿØ ÿØŸÅÿπ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸáŸÜÿß.",
    name:"ÿßŸÑÿßÿ≥ŸÖ", phone:"ÿßŸÑŸáÿßÿ™ŸÅ (Ÿàÿßÿ™ÿ≥ÿßÿ®)", mode:"ŸÜŸàÿπ ÿßŸÑÿ∑ŸÑÿ®", delivery:"ÿ™ŸàÿµŸäŸÑ", pickup:"ÿßÿ≥ÿ™ŸÑÿßŸÖ",
    address:"ÿßŸÑÿπŸÜŸàÿßŸÜ", postcode:"ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑÿ®ÿ±ŸäÿØŸä", notes:"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™", back:"ÿ±ÿ¨Ÿàÿπ", save:"ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™", saved_ok:"ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ üéâ"
  }
};
let LANG = localStorage.getItem('lang') || 'en';

/* ===================== MENU ===================== */
const CATS = ["pizzas","burgers","wraps","sides","deals","drinks"];
const MENU = {
  pizzas:[
    {id:"p-marg", name:"Margherita", desc_en:"Classic tomato & mozzarella.", desc_ar:"ÿµŸÑÿµÿ© ÿ∑ŸÖÿßÿ∑ŸÖ ŸÖÿπ ÿ¨ÿ®ŸÜÿ© ŸÖŸàÿ≤ÿßÿ±ŸäŸÑÿß.", sizes:{'10"':5.99,'12"':7.99,'15"':9.99}, tag:"HOT", img:"pizza-margherita.jpg"},
    {id:"p-pep", name:"Pepperoni", desc_en:"Double pepperoni, mozzarella.", desc_ar:"ÿ®ÿ®ÿ±ŸàŸÜŸä ŸÖÿ≤ÿØŸàÿ¨ ŸÖÿπ ŸÖŸàÿ≤ÿßÿ±ŸäŸÑÿß.", sizes:{'10"':6.99,'12"':8.99,'15"':11.49}, img:"pizza-pepperoni.jpg"},
    {id:"p-meat", name:"Meat Feast", desc_en:"Pepperoni, beef, chicken.", desc_ar:"ÿ®ÿ®ÿ±ŸàŸÜŸä ŸàŸÑÿ≠ŸÖ ÿ®ŸÇÿ±Ÿä ŸàÿØÿ¨ÿßÿ¨.", sizes:{'10"':7.49,'12"':9.99,'15"':12.99}, img:"pizza-meatfeast.jpg"},
    {id:"p-veggie", name:"Vegetarian Hot", desc_en:"Fresh peppers, onion, olives, jalape√±o.", desc_ar:"ŸÅŸÑŸÅŸÑ ÿ∑ÿßÿ≤ÿ¨ Ÿàÿ®ÿµŸÑ Ÿàÿ≤Ÿäÿ™ŸàŸÜ ŸàŸáÿßŸÑÿ®ŸäŸÜŸà.", sizes:{'10"':6.49,'12"':8.49,'15"':10.99}, img:"pizza-veg.jpg"}
  ],
  burgers:[
    {id:"b-ch", name:"Chicken Burger", desc_en:"Crispy chicken, lettuce, mayo.", desc_ar:"ÿØÿ¨ÿßÿ¨ ŸÖŸÇÿ±ŸÖÿ¥ ŸàÿÆÿ≥ ŸàŸÖÿßŸäŸàŸÜŸäÿ≤.", sizes:{Meal:5.99, Single:4.49}, img:"burger-chicken.jpg"},
    {id:"b-veggie", name:"Veggie Burger", desc_en:"Grilled veggie patty.", desc_ar:"ÿ®ÿ±ÿ∫ÿ± ŸÜÿ®ÿßÿ™Ÿä ŸÖÿ¥ŸàŸä.", sizes:{Meal:5.49, Single:3.99}, img:"burger-veggie.jpg"}
  ],
  wraps:[
    {id:"w-ch", name:"Chicken Wrap", desc_en:"Chicken, salad, sauce.", desc_ar:"ÿØÿ¨ÿßÿ¨ Ÿàÿ≥ŸÑÿ∑ÿ© ŸàÿµŸàÿµ.", sizes:{Regular:3.99, Meal:5.99}, img:"wrap-chicken.jpg"},
    {id:"w-veg", name:"Vegetable Wrap", desc_en:"Fresh vegetables.", desc_ar:"ÿÆÿ∂ÿßÿ± ÿ∑ÿßÿ≤ÿ¨ÿ©.", sizes:{Regular:3.49, Meal:5.49}, img:"wrap-veggie.jpg"}
  ],
  sides:[
    {id:"s-fries", name:"Fries", desc_en:"Crispy fries.", desc_ar:"ÿ®ÿ∑ÿßÿ∑ÿ≥ ŸÖŸÇŸÑŸäÿ© ŸÖŸÇÿ±ŸÖÿ¥ÿ©.", sizes:{Small:1.50, Large:2.50}, img:"side-fries.jpg"},
    {id:"s-onion", name:"Onion Rings (10)", desc_en:"Golden rings.", desc_ar:"ÿ≠ŸÑŸÇÿßÿ™ ÿ®ÿµŸÑ ÿ∞Ÿáÿ®Ÿäÿ©.", sizes:{Box:2.99}, img:"side-onionrings.jpg"}
  ],
  deals:[
    {id:"d-meal1", name:"Meal 1", desc_en:'Any 10" pizza + garlic bread + drink', desc_ar:'ÿ£Ÿä ÿ®Ÿäÿ™ÿ≤ÿß ÿ≠ÿ¨ŸÖ 10" + ÿÆÿ®ÿ≤ ÿ®ÿßŸÑÿ´ŸàŸÖ + ŸÖÿ¥ÿ±Ÿàÿ®', sizes:{Deal:12.50}, tag:"BF DEAL", img:"deal-meal1.jpg"},
    {id:"d-meal2", name:"Meal 2", desc_en:'2x 12" pizza + 1.5L drink', desc_ar:'2 ÿ®Ÿäÿ™ÿ≤ÿß 12" + ŸÖÿ¥ÿ±Ÿàÿ® 1.5 ŸÑÿ™ÿ±', sizes:{Deal:17.00}, img:"deal-meal2.jpg"}
  ],
  drinks:[
    {id:"dr-15coke", name:"Coke/Pepsi 1.5L", desc_en:"Cold.", desc_ar:"ÿ®ÿßÿ±ÿØ.", sizes:{Bottle:3.00}, img:"drink-15l.jpg"},
    {id:"dr-can", name:"Can 330ml", desc_en:"Various flavours.", desc_ar:"ŸÜŸÉŸáÿßÿ™ ŸÖÿ™ÿπÿØÿØÿ©.", sizes:{Can:1.10}, img:"drink-can.jpg"}
  ]
};

/* ===================== HELPERS ===================== */
function money(n){ const v = Number(n)||0; return `${STORE.currency}${v.toFixed(2)}`; }
function safeOpen(url){ const w = window.open(url, '_blank', 'noopener'); if(w) w.opener=null; }
function showToast(text){ const t=document.getElementById('toast'); t.textContent=text; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200); }

/* ===================== RENDER ===================== */
const elTabs=document.getElementById('tabs');
const elCatalog=document.getElementById('catalog');
function makeTabs(){
  elTabs.innerHTML='';
  I18N[LANG].tabs.forEach((t,i)=>{
    const b=document.createElement('button');
    b.type='button';
    b.className='pill'+(i===0?' active':'');
    b.textContent=t; b.dataset.cat=CATS[i];
    b.addEventListener('click',()=>{
      elTabs.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));
      b.classList.add('active'); renderCat(b.dataset.cat);
    });
    elTabs.appendChild(b);
  });
}
function renderCat(catKey){
  elCatalog.innerHTML='';
  (MENU[catKey]||[]).forEach(item=>{
    const card=document.createElement('article'); card.className='card';
    const bg=item.img?`style="background-image:url('./img/${item.img}'),linear-gradient(#0e0e11,#0e0e11)"`:'';
    card.innerHTML=`
      <div class="img" ${bg} role="img" aria-label="${item.name}"></div>
      ${item.tag?`<span class="tag">${item.tag}</span>`:''}
      <div class="body">
        <div class="name">${item.name}</div>
        <div class="desc">${LANG==='en'?item.desc_en:item.desc_ar}</div>
        <div class="row-sb">
          <label><span data-i18n="size">${I18N[LANG].size}</span>:
            <select aria-label="Size">
              ${Object.entries(item.sizes).map(([k,v])=>`<option value="${v}">${k} ‚Äî ${money(v)}</option>`).join('')}
            </select>
          </label>
          <div class="qty" aria-label="${I18N[LANG].qty}">
            <button class="minus" type="button" aria-label="Decrease quantity">‚àí</button>
            <span class="q">1</span>
            <button class="plus" type="button" aria-label="Increase quantity">+</button>
          </div>
        </div>
        <div class="row-sb" style="margin-top:8px">
          <div class="price">${I18N[LANG].from} ${money(Math.min(...Object.values(item.sizes)))}</div>
          <button class="btn add" data-id="${item.id}" type="button">${I18N[LANG].add}</button>
        </div>
      </div>`;
    const qty=card.querySelector('.qty');
    qty.addEventListener('click',e=>{
      const span=qty.querySelector('.q'); let q=parseInt(span.textContent,10);
      if(e.target.classList.contains('minus')) q=Math.max(1,q-1);
      if(e.target.classList.contains('plus')) q=q+1; span.textContent=q;
    });
    card.querySelector('.add').addEventListener('click',()=>{
      const sizeSel=card.querySelector('select');
      const price=parseFloat(sizeSel.value);
      const sizeName=sizeSel.options[sizeSel.selectedIndex].text.split(' ‚Äî ')[0];
      const q=parseInt(card.querySelector('.q').textContent,10);
      state.cart.push({id:item.id,name:item.name,desc:(LANG==='en'?item.desc_en:item.desc_ar),size:sizeName,price,q,img:item.img||'pizza.jpg'});
      renderCart(); openDrawer(); showToast('Item added to cart');
    });
    elCatalog.appendChild(card);
  });
}

/* ===================== CART + CADASTRO ===================== */
const drawer=document.getElementById('drawer');
const overlay=document.getElementById('overlay');
const fab=document.getElementById('fabCart');
const fabCount=document.getElementById('fabCount');
const btnClear=document.getElementById('btnClear');
const btnWhats=document.getElementById('btnWhats');
const btnEmail=document.getElementById('btnEmail');
const btnCadastro=document.getElementById('btnCadastro');

const state={
  cart: JSON.parse(localStorage.getItem('cart')||'[]'),
  cadastro: JSON.parse(localStorage.getItem('cust')||'null')
};

function openDrawer(){drawer.classList.add('active'); drawer.setAttribute('aria-hidden','false');}
function closeDrawer(){drawer.classList.remove('active'); drawer.setAttribute('aria-hidden','true');}
overlay.addEventListener('click',closeDrawer);
fab.addEventListener('click',openDrawer);

function renderCart(){
  const list=document.getElementById('cartList'); list.innerHTML='';
  let total=0;
  state.cart.forEach((it,idx)=>{
    total+=it.price*it.q;
    const row=document.createElement('div'); row.className='cart-item';
    row.innerHTML=`
      <img alt="${it.name}" src="./img/${it.img}" loading="lazy" decoding="async">
      <div>
        <div style="font-weight:800">${it.name}</div>
        <div class="meta">${it.size} ‚Ä¢ ${I18N[LANG].qty}: ${it.q} ‚Ä¢ ${money(it.price)} ea</div>
      </div>
      <button class="btn" style="padding:8px" type="button" aria-label="Remove">‚úï</button>`;
    row.querySelector('button').addEventListener('click',()=>{ state.cart.splice(idx,1); renderCart(); showToast('Item removed'); });
    list.appendChild(row);
  });
  document.getElementById('cartTotal').textContent=money(total);
  fabCount.textContent=state.cart.reduce((a,b)=>a+b.q,0);
  localStorage.setItem('cart', JSON.stringify(state.cart));
  const enabled = state.cart.length>0 && !!state.cadastro;
  btnWhats.disabled=!enabled; btnEmail.disabled=!enabled;
}

btnClear.addEventListener('click',()=>{ state.cart=[]; localStorage.removeItem('cart'); renderCart(); });

/* ===== TEXTO PURO (sem dupla codifica√ß√£o) ===== */
function montarTextoPedido(){
  const linhas = state.cart
    .map(it => `‚Ä¢ ${it.name} (${it.size}) x${it.q} ‚Äî ${money(it.price)} ea`)
    .join('\n');

  const total = state.cart.reduce((s,it)=> s + it.price*it.q, 0);
  const c = state.cadastro || {};
  const header = (I18N[LANG].wa_header || 'Order');
  const itemsLabel = (I18N[LANG].wa_items || 'Items');

  const cli = [
    '',
    `Customer: ${c.nome || '-'}`,
    `WhatsApp: ${c.tel || '-'}`,
    `Type: ${c.mode || '-'}`,
    `Address: ${c.addr || '-'}`,
    `Postcode: ${c.cep || '-'}`,
    `Notes: ${c.obs || '-'}`
  ].join('\n');

  const rod = [``, `Total: ${money(total)}`, `Ref:${Date.now()}`].join('\n');

  return `${header}\n\n${itemsLabel}:\n${linhas}${cli}\n${rod}`;
}
function waUrl(text){
  const max = 1900;
  const msg = text.length>max ? (text.slice(0,max-1)+'‚Ä¶') : text;
  return `https://wa.me/${phoneDigits}?text=${encodeURIComponent(msg)}`;
}
btnWhats.addEventListener('click', ()=> safeOpen(waUrl(montarTextoPedido())));
btnEmail.addEventListener('click', ()=>{
  const assunto = `Order ‚Äî ${I18N[LANG].brand || 'Tasty Pizza'}`;
  const corpo = montarTextoPedido();
  const url = `mailto:${STORE.emailPedidos}?subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(corpo)}`;
  window.location.href = url;
});

/* ===== Modal cadastro ===== */
const modal=document.getElementById('modal');
const btnFechar=document.getElementById('fecharModal');
const okMsg=document.getElementById('okMsg');
function fillCadastro(){
  const c=state.cadastro||{};
  document.getElementById('c_nome').value=c.nome||'';
  document.getElementById('c_tel').value=c.tel||'';
  document.getElementById('c_mode').value=c.mode||'delivery';
  document.getElementById('c_addr').value=c.addr||'';
  document.getElementById('c_cep').value=c.cep||'';
  document.getElementById('c_obs').value=c.obs||'';
  document.getElementById('c_rem').checked=!!localStorage.getItem('cust');
}
function closeModal(){ modal.classList.remove('show'); document.removeEventListener('keydown', trapKeys); }
function openModal(){ fillCadastro(); modal.classList.add('show'); document.getElementById('c_nome').focus(); document.addEventListener('keydown', trapKeys); }
function trapKeys(e){ if(e.key==='Escape') closeModal(); }
document.getElementById('btnCadastro').addEventListener('click',openModal);
btnFechar.addEventListener('click',closeModal);

document.getElementById('custForm').addEventListener('submit',(e)=>{
  e.preventDefault();
  const tel = document.getElementById('c_tel').value.trim();
  const cep = document.getElementById('c_cep').value.trim().toUpperCase().replace(/\s+/g,'');
  const cepFormatted = cep.replace(/^([A-Z]{1,2}\d[A-Z\d]?)(\d[A-Z]{2})$/,'$1 $2');
  const c={
    nome:document.getElementById('c_nome').value.trim(),
    tel:tel,
    mode:document.getElementById('c_mode').value,
    addr:document.getElementById('c_addr').value.trim(),
    cep:cepFormatted || '',
    obs:document.getElementById('c_obs').value.trim()
  };
  if(!c.nome || !c.tel){ alert(LANG==='en'?'Name and phone are required.':'ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑŸáÿßÿ™ŸÅ ŸÖÿ∑ŸÑŸàÿ®ÿßŸÜ.'); return; }
  state.cadastro=c;
  if(document.getElementById('c_rem').checked){ localStorage.setItem('cust',JSON.stringify(c)); } else { localStorage.removeItem('cust'); }
  okMsg.classList.add('show');
  setTimeout(()=>{ okMsg.classList.remove('show'); closeModal(); renderCart(); },800);
});

/* ===================== THEME & LANG ===================== */
const savedTheme = localStorage.getItem('theme') || 'mcd'; // come√ßa no McD Light para ver o fundo branco
document.documentElement.setAttribute('data-theme', savedTheme);
document.querySelectorAll('[data-theme-btn]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const t=btn.dataset.theme;
    document.documentElement.setAttribute('data-theme',t);
    localStorage.setItem('theme',t);
  });
});

function applyLang(){
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const k=el.getAttribute('data-i18n'); if(I18N[LANG][k]) el.textContent=I18N[LANG][k];
  });
  document.documentElement.lang=(LANG==='en'?'en':'ar');
  document.documentElement.dir=(LANG==='en'?'ltr':'rtl');
  document.querySelectorAll('.flag').forEach(b=>b.classList.toggle('active', b.dataset.lang===LANG));
  makeTabs(); renderCat(CATS[0]); renderCart();
  localStorage.setItem('lang',LANG);
}
document.getElementById('btn-en').addEventListener('click', ()=>{ LANG='en'; applyLang(); });
document.getElementById('btn-ar').addEventListener('click', ()=>{ LANG='ar'; applyLang(); });

/* INIT */
document.getElementById('y').textContent=new Date().getFullYear();
applyLang();
</script>
</body>
</html>
